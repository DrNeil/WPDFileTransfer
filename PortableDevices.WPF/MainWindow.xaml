<Window x:Class="PortableDevices.WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PortableDevices.WPF"
        xmlns:pd="clr-namespace:PortableDevices;assembly=PortableDevices"
        mc:Ignorable="d"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="Portable Devices" Height="450" Width="800">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200" />
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid Grid.Column="0" >
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="40"/>
            </Grid.RowDefinitions>
            <Label Content="Devices" FontWeight="Bold" Grid.Row="0"/>

            <ListView x:Name="DevicesList" Grid.Row="1" ItemsSource="{Binding Path=Devices}" 
                      SelectedItem="{Binding Path=SelectedDevice}"
                      SelectionChanged="DevicesList_SelectionChanged">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock FontWeight="Bold" Text="{Binding Name}" />
                            <TextBlock Text="{Binding Manufacturer}" />
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <Button x:Name="RefreshButton" Grid.Row="2" Content="Refresh" Click="RefreshButton_Click" />
        </Grid>
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="40"/>
            </Grid.RowDefinitions>
            <StackPanel Grid.Row="0" Orientation="Horizontal" >
                <Label Content="{Binding Path=SelectedDevice.Name}" FontWeight="Bold" />
                <Label Content="{Binding Path=SelectedDevice.Description}" />
                <Label Content="{Binding Path=SelectedDevice.Manufacturer}" FontWeight="Bold" />
            </StackPanel>
            <Grid Grid.Row="1" >
                <Grid.RowDefinitions>
                    <RowDefinition Height="30"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <StackPanel Grid.Row="0" Orientation="Horizontal" VerticalAlignment="Bottom">
                    <Button Content=" .. " FontSize="14" Width="30" Height="20" Click="BackButton_Click" Background="White"/>
                    <Image Source="/resources/folder.png" Height="20" Width="20" Margin="10,0,5,0" />
                    <Label Content="{Binding Path=CurrentFolder.Name}" FontWeight="Bold" />
                </StackPanel>
                <ListView x:Name="FileListView" Grid.Row="1" ItemsSource="{Binding Path=CurrentFolder.Files}" VerticalAlignment="Stretch">
                    <ListView.Resources>
                        <Style TargetType="{x:Type ListViewItem}">
                            <EventSetter Event="MouseDoubleClick" Handler="FileDoubleClick" />
                        </Style>
                        <DataTemplate DataType="{x:Type pd:PortableDeviceFolder}">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="/resources/folder.png" Height="20" Width="20" Margin="0,0,5,0" />
                                <TextBlock Text="{Binding Name}" FontWeight="Bold"/>
                            </StackPanel>
                        </DataTemplate>
                        <DataTemplate DataType="{x:Type pd:PortableDeviceFile}">
                            <StackPanel  Orientation="Horizontal">
                                <Image Source="/resources/file.png" Height="20" Width="20" Margin="0,0,5,0"  />
                                <TextBlock Text="{Binding Name}" />
                            </StackPanel>
                        </DataTemplate>
                    </ListView.Resources>
                </ListView>
            </Grid>
            <Grid Grid.Row="2">
                <Button Content="Upload file to this folder" FontSize="14" Click="Upload_Click"/>
            </Grid>
        </Grid>
    </Grid>
</Window>
